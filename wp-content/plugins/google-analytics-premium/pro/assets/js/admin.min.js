;jQuery(document).ready(function(){var t=[],i={mode:'range',disableMobile:'true',dateFormat:'Y-m-d',disable:[function(t){var a=t,m=moment(moment().tz(monsterinsights_admin.timezone).format('YYYY-MM-DD')),l=moment.duration(m.diff(a)),e=l.asDays();e=e+1;var n=moment(t).tz(monsterinsights_admin.timezone),i=n.subtract(e,'d').tz(monsterinsights_admin.timezone),s=moment(),r=i.isBetween(moment('01-01-2005','MM-DD-YYYY').tz(monsterinsights_admin.timezone),s),o=moment(t).isBetween(moment('01-01-2005','MM-DD-YYYY').tz(monsterinsights_admin.timezone),s);return!r||!o}],onClose:function(e,r,s){var n=[];if(e[0]!=null&&e[1]!=null){n=e.map(function(t){return this.formatDate(t,'Y-m-d')},this)}
else{return};if((t[0]!=null&&t[1]!=null)&&(t[0]==n[0]&&t[1]===n[1])){return};jQuery('#monsterinsights-reports-pages').addClass('monsterinsights-mega-blur');var i=jQuery('#monsterinsights-reports-pages').find('div.monsterinsights-main-nav-tab.monsterinsights-active').attr('id').replace('monsterinsights-main-tab-',''),o=jQuery('#monsterinsights-reports-pages').find('div.monsterinsights-main-nav-tab.monsterinsights-active').attr('id');swal({type:'info',title:monsterinsights_admin.refresh_report_title,text:monsterinsights_admin.refresh_report_text,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,onOpen:function(){swal.showLoading();var e={'action':'monsterinsights_refresh_reports','security':monsterinsights_admin.admin_nonce,'isnetwork':monsterinsights_admin.isnetwork,'start':n[0],'end':n[1],'report':i,};jQuery.post(ajaxurl,e,function(e){if(e.success&&e.data.html){t=n;jQuery('#monsterinsights-main-tab-'+i+' > .monsterinsights-reports-wrap').html(e.data.html);monsterinsights_equalheight2column();jQuery('#monsterinsights-main-tab-'+i+' .monsterinsights-pro-report-date-control-group .monsterinsights-pro-report-7-days').removeClass('active').disable(!1);jQuery('#monsterinsights-main-tab-'+i+' .monsterinsights-pro-report-date-control-group .monsterinsights-pro-report-30-days').removeClass('active').disable(!1);jQuery('#monsterinsights-main-tab-'+i+' .monsterinsights-pro-report-date-control-group .monsterinsights-pro-datepicker').addClass('monsterinsights-datepicker-active');swal.close()}
else{s.setDate(t);swal({type:'error',title:monsterinsights_admin.refresh_report_failure_title,text:e.data.message,}).catch(swal.noop)}}).then(function(t){jQuery('#monsterinsights-reports-pages').removeClass('monsterinsights-mega-blur')}).fail(function(e,n,i){s.setDate(t);var r=jQuery(e.responseText).text();r=r.substring(0,r.indexOf('Call Stack'));swal({type:'error',title:monsterinsights_admin.refresh_report_failure_title,text:r,}).catch(swal.noop);jQuery('#monsterinsights-reports-pages').removeClass('monsterinsights-mega-blur')})}})},};jQuery('.monsterinsights-pro-datepicker').flatpickr(i);jQuery('.monsterinsights-pro-report-date-control-group > .btn').click(function(t){t.preventDefault();var r=jQuery(this),s=jQuery(this).hasClass('monsterinsights-pro-report-7-days'),o=jQuery(this).hasClass('monsterinsights-pro-report-30-days');if(s||o){jQuery('#monsterinsights-reports-pages').addClass('monsterinsights-mega-blur');var e=jQuery('#monsterinsights-reports-pages').find('div.monsterinsights-main-nav-tab.monsterinsights-active').attr('id').replace('monsterinsights-main-tab-',''),a=jQuery('#monsterinsights-reports-pages').find('div.monsterinsights-main-nav-tab.monsterinsights-active').attr('id'),n=s?moment().subtract(8,'days').tz(monsterinsights_admin.timezone).format('YYYY-MM-DD'):moment().subtract(31,'days').tz(monsterinsights_admin.timezone).format('YYYY-MM-DD'),i=moment().subtract(1,'days').tz(monsterinsights_admin.timezone).format('YYYY-MM-DD');swal({type:'info',title:monsterinsights_admin.refresh_report_title,text:monsterinsights_admin.refresh_report_text,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,onOpen:function(){swal.showLoading();var t={'action':'monsterinsights_refresh_reports','security':monsterinsights_admin.admin_nonce,'isnetwork':monsterinsights_admin.isnetwork,'start':n,'end':i,'report':e,};jQuery.post(ajaxurl,t,function(t){if(t.success&&t.data.html){jQuery(r).addClass('active').disable(!0).siblings().removeClass('active').disable(!1).removeClass('monsterinsights-datepicker-active');jQuery('#monsterinsights-main-tab-'+e+' > .monsterinsights-reports-wrap').html(t.data.html);monsterinsights_equalheight2column();swal.close()}
else{swal({type:'error',title:monsterinsights_admin.refresh_report_failure_title,text:t.data.message,}).catch(swal.noop)}}).then(function(t){jQuery('#monsterinsights-reports-pages').removeClass('monsterinsights-mega-blur')}).fail(function(t,e,s){var n=jQuery(t.responseText).text();n=n.substring(0,n.indexOf('Call Stack'));swal({type:'error',title:monsterinsights_admin.refresh_report_failure_title,text:n,}).catch(swal.noop);jQuery('#monsterinsights-reports-pages').removeClass('monsterinsights-mega-blur')})}})}});jQuery('#monsterinsights-reports-page-main-nav .monsterinsights-main-nav-item.monsterinsights-nav-item').attrchange(function(t){if(t!='class'){return};var e=jQuery('#monsterinsights-reports-pages').find('div.monsterinsights-main-nav-tab.monsterinsights-active').attr('id').replace('monsterinsights-main-tab-','');if(e!=='realtime'){return};var o=jQuery('#monsterinsights-reports-pages').find('div.monsterinsights-main-nav-tab.monsterinsights-active').attr('id'),i=moment().tz(monsterinsights_admin.timezone).format('YYYY-MM-DD'),r=moment().tz(monsterinsights_admin.timezone).format('YYYY-MM-DD');jQuery('#monsterinsights-reports-pages').addClass('monsterinsights-mega-blur');swal({type:'info',title:monsterinsights_admin.refresh_report_title,text:monsterinsights_admin.refresh_report_text,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,onOpen:function(){swal.showLoading();var t={'action':'monsterinsights_refresh_reports','security':monsterinsights_admin.admin_nonce,'isnetwork':monsterinsights_admin.isnetwork,'start':i,'end':r,'report':e,};jQuery.post(ajaxurl,t,function(t){if(t.success&&t.data.html){jQuery('#monsterinsights-main-tab-'+e+' > .monsterinsights-reports-wrap').html(t.data.html);monsterinsights_equalheight2column();swal.close()}
else{var s={type:'error',title:monsterinsights_admin.refresh_report_failure_title,html:t.data.message,};if(t.data.data&&t.data.data.footer){s.footer=t.data.data.footer};swal(s).catch(swal.noop)}}).then(function(t){jQuery('#monsterinsights-reports-pages').removeClass('monsterinsights-mega-blur')}).fail(function(t,e,s){var n=jQuery(t.responseText).text();n=n.substring(0,n.indexOf('Call Stack'));swal({type:'error',title:monsterinsights_admin.refresh_report_failure_title,text:n,}).catch(swal.noop);jQuery('#monsterinsights-reports-pages').removeClass('monsterinsights-mega-blur')})}});n();setTimeout(function(){s()},60000)});function s(error_count=0){var e=jQuery('#monsterinsights-reports-pages').find('div.monsterinsights-main-nav-tab.monsterinsights-active').attr('id').replace('monsterinsights-main-tab-','');if(e!=='realtime'||error_count>5){return};if(!document.hasFocus()){jQuery('#monsterinsights-reports-pages').addClass('monsterinsights-mega-blur');while(!document.hasFocus()){swal({type:'info',title:monsterinsights_admin.resume_report_title,text:monsterinsights_admin.resume_report_text,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,showConfirmButton:!1,});return}};var a=jQuery('#monsterinsights-reports-pages').find('div.monsterinsights-main-nav-tab.monsterinsights-active').attr('id'),i=moment().tz(monsterinsights_admin.timezone).format('YYYY-MM-DD'),r=moment().tz(monsterinsights_admin.timezone).format('YYYY-MM-DD'),o={'action':'monsterinsights_refresh_reports','security':monsterinsights_admin.admin_nonce,'isnetwork':monsterinsights_admin.isnetwork,'start':i,'end':r,'report':e,};jQuery.post(ajaxurl,o,function(t){if(t.success&&t.data.html){jQuery('#monsterinsights-reports-pages').addClass('monsterinsights-mega-blur');swal({type:'info',title:monsterinsights_admin.refresh_report_title,text:monsterinsights_admin.refresh_report_text,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,onOpen:function(){swal.showLoading()}});jQuery('#monsterinsights-main-tab-'+e+' > .monsterinsights-reports-wrap').html(t.data.html);monsterinsights_equalheight2column();jQuery('#monsterinsights-reports-pages').removeClass('monsterinsights-mega-blur');swal.close()}
else{}}).then(function(t){n()}).fail(function(t,e,s){error_count++});setTimeout(function(){s(error_count)},60000)};var e;function n(){var t=0;if(e){clearTimeout(e)};e=setInterval(function(){t++;jQuery('#monsterinsights-realtime-report-timer').html(t)},1000)};jQuery(document).on('click','#monsterinsights-verify-submit',function(t){t.preventDefault();t.stopPropagation();o(jQuery(this))});jQuery(document).on('click','#monsterinsights-deactivate-submit',function(t){t.preventDefault();t.stopPropagation();a(jQuery(this))});jQuery(document).on('click','#monsterinsights-refresh-submit',function(t){t.preventDefault();t.stopPropagation();r()});function r(){var t={action:'monsterinsights_validate_license',nonce:monsterinsights_admin.admin_nonce};swal({type:'info',title:monsterinsights_admin.verify_license_title,text:monsterinsights_admin.verify_license_text,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,onOpen:function(){swal.showLoading();jQuery.post(ajaxurl,t).done(function(t){swal.close();if(t.success){swal({type:'success',title:monsterinsights_admin.verify_license_success_title,text:t.data.message,confirmButtonText:monsterinsights_admin.ok_text,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1}).then(function(){location.reload()}).catch(swal.noop)}
else{swal({type:'error',title:monsterinsights_admin.verify_license_error_title,text:t.data.error}).catch(swal.noop)}}).error(function(t){swal.close();console.log(t.responseText)})}}).catch(swal.noop)};function o(t){var e=t.closest('form'),s={action:'monsterinsights_verify_license',nonce:monsterinsights_admin.admin_nonce,license:e.find('#monsterinsights-settings-key').val(),};swal({type:'info',title:monsterinsights_admin.verify_license_title,text:monsterinsights_admin.verify_license_text,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,onOpen:function(){swal.showLoading();jQuery.post(ajaxurl,s).done(function(t){swal.close();if(t.success){swal({type:'success',title:monsterinsights_admin.verify_license_success_title,text:t.data.message,confirmButtonText:monsterinsights_admin.ok_text,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1}).then(function(){location.reload()}).catch(swal.noop)}
else{swal({type:'error',title:monsterinsights_admin.verify_license_error_title,text:t.data.error}).catch(swal.noop)}}).error(function(t){swal.close();console.log(t.responseText)})}}).catch(swal.noop)};function a(t){var e=t.closest('form'),s={action:'monsterinsights_deactivate_license',nonce:monsterinsights_admin.admin_nonce,license:e.find('#monsterinsights-settings-key').val()};swal({type:'info',title:monsterinsights_admin.deactivate_license_title,text:monsterinsights_admin.deactivate_license_text,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,onOpen:function(){swal.showLoading();jQuery.post(ajaxurl,s).done(function(t){swal.close();if(t.success){swal({type:'success',title:monsterinsights_admin.deactivate_license_success_title,text:t.data.message,confirmButtonText:monsterinsights_admin.ok_text,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1}).then(function(){location.reload()}).catch(swal.noop)}
else{swal({type:'error',title:monsterinsights_admin.deauth_loading_error_title,text:t.data.error}).catch(swal.noop)}}).error(function(t){swal.close();console.log(t.responseText)})}}).catch(swal.noop)}});